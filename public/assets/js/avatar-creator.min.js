"use strict";var MINI_YOU={EDITOR:void 0,CANVAS:void 0,initialized:!1};MINI_YOU.init=function(I,i){MINI_YOU.EDITOR=new MINI_YOU.Editor(I),MINI_YOU.CANVAS=new MINI_YOU.Canvas(i),MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS),MINI_YOU.initialized=!0};
"use strict";MINI_YOU.Compiler=function(){},MINI_YOU.Compiler.prototype.constructor=MINI_YOU.Compiler,MINI_YOU.Compiler.prototype.compileCode=function(o){return JSON.parse(o)};
"use strict";MINI_YOU.Avatar=function(t){this._canvas=t,this._init()},MINI_YOU.Avatar.prototype.constructor=MINI_YOU.Avatar,MINI_YOU.Avatar.BODY_SHAPE_1={POINTS:[[224,144],[192,144],[192,64],[288,64],[288,144],[256,144],[256,160],[352,160],[352,320],[304,320],[304,208],[304,320],[304,464],[256,464],[256,320],[224,320],[224,464],[176,464],[176,320],[176,208],[176,320],[128,320],[128,160],[224,160]]},MINI_YOU.Avatar.SHIRTS={SHIRT:{POINTS:[[128,160],[352,160],[352,288],[304,288],[304,208],[304,320],[176,320],[176,208],[176,288],[128,288],[128,160]]},T_SHIRT:{POINTS:[[128,160],[352,160],[352,224],[304,224],[304,208],[304,320],[176,320],[176,208],[176,224],[128,224],[128,160]]}},MINI_YOU.Avatar.prototype._init=function(){this._needsDrawing=!0,this._canvas.get2DContext().strokeStyle="black",this._bodyShape=MINI_YOU.Avatar.BODY_SHAPE_1,this._bodyColor="lightgreen",this._shirtShape=MINI_YOU.Avatar.SHIRTS.SHIRT,this._shirtColor="red",this._draw()},MINI_YOU.Avatar.prototype._draw=function(){this._needsDrawing&&(this._drawBody(this.getBodyShape(),this.getBodyColor()),this._drawShirt(this.getShirtShape(),this.getShirtColor()),this._needsDrawing=!1)},MINI_YOU.Avatar.prototype.processData=function(t){if(void 0!==t.body){if(void 0!==t.body.shape)switch(t.body.shape){case"shape1":default:this.setBodyShape(MINI_YOU.Avatar.BODY_SHAPE_1)}void 0!==t.body.color&&this.setBodyColor(t.body.color)}if(void 0!==t.shirt){if(void 0!==t.shirt.shape)switch(t.shirt.shape){case"tshirt":this.setShirtShape(MINI_YOU.Avatar.SHIRTS.T_SHIRT);break;case"shirt":default:this.setShirtShape(MINI_YOU.Avatar.SHIRTS.SHIRT)}void 0!==t.shirt.color&&this.setShirtColor(t.shirt.color)}this._draw()},MINI_YOU.Avatar.prototype.setBodyShape=function(t){this._bodyShape=t,this._needsDrawing=!0},MINI_YOU.Avatar.prototype.getBodyShape=function(){return this._bodyShape},MINI_YOU.Avatar.prototype.setBodyColor=function(t){this._bodyColor=t,this._needsDrawing=!0},MINI_YOU.Avatar.prototype.getBodyColor=function(){return this._bodyColor},MINI_YOU.Avatar.prototype._drawBody=function(t,o){this._canvas.get2DContext().fillStyle=o,this._canvas.drawPolygon(t.POINTS[0][0],t.POINTS[0][1],t.POINTS,!0,!0)},MINI_YOU.Avatar.prototype.getShirtShape=function(){return this._shirtShape},MINI_YOU.Avatar.prototype.setShirtShape=function(t){this._shirtShape=t,this._needsDrawing=!0},MINI_YOU.Avatar.prototype.getShirtColor=function(){return this._shirtColor},MINI_YOU.Avatar.prototype.setShirtColor=function(t){this._shirtColor=t,this._needsDrawing=!0},MINI_YOU.Avatar.prototype._drawShirt=function(t,o){this._canvas.get2DContext().fillStyle=o,this._canvas.drawPolygon(t.POINTS[0][0],t.POINTS[0][1],t.POINTS,!0,!0)};
"use strict";MINI_YOU.Canvas=function(t){this._canvas=t[0],this._ctx=this._canvas.getContext("2d"),$(t).after('<div class="debugger"></div>'),$(t).on("mousemove",function(t){$("div.debugger").text("x: "+t.offsetX+" | y: "+t.offsetY)}),this._width=this._canvas.width,this._height=this._canvas.height,this._init(),this._avatar=new MINI_YOU.Avatar(this)},MINI_YOU.Canvas.prototype.constructor=MINI_YOU.Canvas,MINI_YOU.Canvas.prototype._init=function(){this._ctx.fillStyle="white",this._ctx.fillRect(0,0,this._width,this._height),this._ctx.strokeStyle="#EAEAEA";for(var t="",i=0;i<this._width;i+=16)this.drawLine(i,0,i,this._height),t+=i+", ";console.log(t);for(var s=0;s<this._height;s+=16)this.drawLine(0,s,this._width,s)},MINI_YOU.Canvas.prototype.get2DContext=function(){return this._ctx},MINI_YOU.Canvas.prototype.handleEditorAlert=function(t,i){"jsonChanged"===t&&this._avatar.processData(i)},MINI_YOU.Canvas.prototype.getWidth=function(){return this._width},MINI_YOU.Canvas.prototype.getHeight=function(){return this._height},MINI_YOU.Canvas.prototype.drawLine=function(t,i,s,h){this._ctx.beginPath(),this._ctx.moveTo(t,i),this._ctx.lineTo(s,h),this._ctx.closePath(),this._ctx.stroke()},MINI_YOU.Canvas.prototype.drawPolygon=function(t,i,s,h,e){this._ctx.beginPath(),this._ctx.moveTo(t,i);for(var o=0;o<s.length;o++){var n=s[o][0],a=s[o][1];this._ctx.lineTo(n,a)}this._ctx.closePath(),!0===h&&this._ctx.fill(),!0===e&&this._ctx.stroke()};
"use strict";MINI_YOU.Editor=function(t){this._element=t,this._compiler=new MINI_YOU.Compiler,this._listeners=[];var e=this;this._element.on("keyup",function(t){e.parseText()}),this._element.on("keydown",function(t){switch(t.keyCode){case 9:t.preventDefault();var e=$(this).get(0).selectionStart,s=$(this).get(0).selectionEnd;$(this).val($(this).val().substring(0,e)+"    "+$(this).val().substring(s)),$(this).get(0).selectionStart=$(this).get(0).selectionEnd=e+4}})},MINI_YOU.Editor.prototype.constructor=MINI_YOU.Editor,MINI_YOU.Editor.prototype.attachListener=function(t){this._listeners.push(t)},MINI_YOU.Editor.prototype._alertListeners=function(t,e){for(var s=0;s<this._listeners.length;s++)this._listeners[s].handleEditorAlert(t,e)},MINI_YOU.Editor.prototype.parseText=function(){var t=this._element.val();try{var e=this._compiler.compileCode(t);this._element.css({background:"black",color:"white"}),this._alertListeners("jsonChanged",e)}catch(t){console.error(t),this._element.css({background:"darkred",color:"red"})}},MINI_YOU.Editor.prototype.setText=function(t){this._element.val(t),this.parseText()};
//# sourceMappingURL=avatar-creator.min.js.map
