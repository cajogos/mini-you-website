"use strict";var MINI_YOU={EDITOR:void 0,CANVAS:void 0,initialized:!1};MINI_YOU.init=function(I,i){MINI_YOU.EDITOR=new MINI_YOU.Editor(I),MINI_YOU.CANVAS=new MINI_YOU.Canvas(i),MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS),MINI_YOU.initialized=!0};
"use strict";MINI_YOU.Compiler=function(){},MINI_YOU.Compiler.prototype.constructor=MINI_YOU.Compiler,MINI_YOU.Compiler.prototype.compileCode=function(o){var r=JSON.parse(o);return console.log(r),r};
"use strict";MINI_YOU.Avatar=function(a){this._canvas=a,this._initDraw()},MINI_YOU.Avatar.prototype.constructor=MINI_YOU.Avatar,MINI_YOU.Avatar.POINTS={HEAD:[[192,64],[288,64],[288,160],[192,160]],BODY:[[160,160],[320,160],[320,320],[160,320]],RIGHT_ARM:[[96,160],[160,160],[160,320],[96,320]],LEFT_ARM:[[320,160],[384,160],[384,320],[320,320]],RIGHT_LEG:[[160,320],[224,320],[224,480],[160,480]],LEFT_LEG:[[256,320],[320,320],[320,480],[256,480]]},MINI_YOU.Avatar.prototype._initDraw=function(){var a=this._canvas.get2DContext();a.strokeStyle="black",this._createHead("red");var t=MINI_YOU.Avatar.POINTS.BODY;a.fillStyle="blue",this._canvas.drawPolygon(t[0][0],t[0][1],t,!0,!0);var r=MINI_YOU.Avatar.POINTS.RIGHT_ARM;a.fillStyle="violet",this._canvas.drawPolygon(r[0][0],r[0][1],r,!0,!0);var o=MINI_YOU.Avatar.POINTS.LEFT_ARM;a.fillStyle="orange",this._canvas.drawPolygon(o[0][0],o[0][1],o,!0,!0);var I=MINI_YOU.Avatar.POINTS.RIGHT_LEG;a.fillStyle="lime",this._canvas.drawPolygon(I[0][0],I[0][1],I,!0,!0);var e=MINI_YOU.Avatar.POINTS.LEFT_LEG;a.fillStyle="yellow",this._canvas.drawPolygon(e[0][0],e[0][1],e,!0,!0)},MINI_YOU.Avatar.prototype.processData=function(a){console.log("data",a),a.head&&this._createHead(a.head.color)},MINI_YOU.Avatar.prototype._createHead=function(a){var t=this._canvas.get2DContext(),r=MINI_YOU.Avatar.POINTS.HEAD;t.fillStyle=a,this._canvas.drawPolygon(r[0][0],r[0][1],r,!0,!0)};
"use strict";MINI_YOU.Canvas=function(t){this._canvas=t[0],this._ctx=this._canvas.getContext("2d"),this._width=this._canvas.width,this._height=this._canvas.height,this._init(),this._avatar=new MINI_YOU.Avatar(this)},MINI_YOU.Canvas.prototype.constructor=MINI_YOU.Canvas,MINI_YOU.Canvas.prototype._init=function(){this._ctx.fillStyle="white",this._ctx.fillRect(0,0,this._width,this._height),this._ctx.strokeStyle="#EAEAEA";for(var t=0;t<this._width;t+=32)this.drawLine(t,0,t,this._height);for(var i=0;i<this._height;i+=32)this.drawLine(0,i,this._width,i)},MINI_YOU.Canvas.prototype.get2DContext=function(){return this._ctx},MINI_YOU.Canvas.prototype.handleEditorAlert=function(t,i){"jsonChanged"===t&&this._avatar.processData(i)},MINI_YOU.Canvas.prototype.getWidth=function(){return this._width},MINI_YOU.Canvas.prototype.getHeight=function(){return this._height},MINI_YOU.Canvas.prototype.drawLine=function(t,i,h,s){this._ctx.beginPath(),this._ctx.moveTo(t,i),this._ctx.lineTo(h,s),this._ctx.closePath(),this._ctx.stroke()},MINI_YOU.Canvas.prototype.drawPolygon=function(t,i,h,s,a){this._ctx.beginPath(),this._ctx.moveTo(t,i);for(var n=0;n<h.length;n++){var e=h[n][0],o=h[n][1];this._ctx.lineTo(e,o)}this._ctx.closePath(),!0===s&&this._ctx.fill(),!0===a&&this._ctx.stroke()};
"use strict";MINI_YOU.Editor=function(t){this._element=t,this._compiler=new MINI_YOU.Compiler,this._listeners=[];var e=this;this._element.on("keyup",function(t){e.parseText()}),this._element.on("keydown",function(t){switch(t.keyCode){case 9:t.preventDefault();var e=$(this).get(0).selectionStart,s=$(this).get(0).selectionEnd;$(this).val($(this).val().substring(0,e)+"    "+$(this).val().substring(s)),$(this).get(0).selectionStart=$(this).get(0).selectionEnd=e+4}})},MINI_YOU.Editor.prototype.constructor=MINI_YOU.Editor,MINI_YOU.Editor.prototype.attachListener=function(t){this._listeners.push(t)},MINI_YOU.Editor.prototype._alertListeners=function(t,e){for(var s=0;s<this._listeners.length;s++)this._listeners[s].handleEditorAlert(t,e)},MINI_YOU.Editor.prototype.parseText=function(){var t=this._element.val();try{var e=this._compiler.compileCode(t);this._element.css({background:"black",color:"white"}),this._alertListeners("jsonChanged",e)}catch(t){console.error(t),this._element.css({background:"darkred",color:"red"})}},MINI_YOU.Editor.prototype.setText=function(t){this._element.val(t),this.parseText()};
//# sourceMappingURL=avatar-creator.min.js.map
