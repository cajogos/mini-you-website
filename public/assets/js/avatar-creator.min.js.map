{"version":3,"sources":["MiniYou.js","Compiler.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Compiler","prototype","constructor","compileCode","code","JSON","parse","Avatar","canvas","this","_canvas","BODY_SHAPE_1","POINTS","LEFT","EYES","X","Y","RIGHT","TOPS","SHIRT","T_SHIRT","BOTTOMS","TROUSERS","ctx","strokeStyle","SHORTS","_eyesShape","_bottomsShape","_needsDrawing","get2DContext","_bodyShape","_bodyColor","BASIC","_eyesColor","_topsShape","getEyesShape","_topsColor","_bottomsColor","_shoesColor","_draw","_drawBody","bodyShape","getBodyColor","_drawEyes","setBodyShape","_drawTops","getTopsShape","getTopsColor","_drawBottoms","getBottomsShape","getBottomsColor","_drawShoes","getShoesColor","processData","data","body","eyes","color","shape","setBodyColor","setEyesShape","bottoms","bottomsShape","setEyesColor","setBottomsShape","tops","setBottomsColor","setTopsShape","shoes","VNECK","setShoesColor","setTopsColor","getBodyShape","radiusEnd","PI","beginPath","arc","leftEyeX","leftEyeY","fill","getEyesColor","eyesShape","rightEyeX","rightEyeY","Math","moveTo","fillStyle","topsShape","drawPolygon","leftShoe","rightShoe","getContext","$","after","e","text","offsetX","offsetY","_width","width","_height","height","_init","_avatar","_ctx","fillRect","pixel","xValues","drawLine","i","console","log","j","message","handleEditorAlert","getWidth","lineTo","getHeight","stroke","startX","startY","points","curX","curY","length","closePath","_compiler","_listeners","self","on","parseText","_element","keyCode","preventDefault","end","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","result","css","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["let MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","MINI_YOU.Compiler = function ()\n{\n};\nMINI_YOU.Compiler.prototype.constructor = MINI_YOU.Compiler;\n\n/**\n * @param {string} code\n */\nMINI_YOU.Compiler.prototype.compileCode = function (code)\n{\n    let json = JSON.parse(code);\n    return json;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function (canvas)\n{\n    this._canvas = canvas;\n    this._init();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.BODY_SHAPE_1 = {\n    POINTS: [\n        [224, 144], [192, 144], [192, 64], [288, 64], [288, 144], [256, 144],\n        [256, 160], [352, 160],\n        // Left Arm\n        [352, 320], [304, 320], [304, 208], [304, 320],\n        // Left Leg\n        [304, 464], [256, 464], [256, 336],\n        // Torso\n        [224, 336],\n        // Right Leg\n        [224, 464], [176, 464], [176, 336],\n        // Right Arm\n        [176, 208], [176, 320], [128, 320], [128, 160], [224, 160]\n    ]\n};\n\nMINI_YOU.Avatar.EYES = {\n    BASIC: {\n        LEFT: {\n            X: 264,\n            Y: 88\n        },\n        RIGHT: {\n            X: 216,\n            Y: 88\n        }\n    }\n};\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.TOPS = {\n    SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 288], [304, 288],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 288], [128, 288], [128, 160]\n        ]\n    },\n    T_SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 224], [304, 224],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 224], [128, 224], [128, 160]\n        ]\n    },\n    VNECK: {\n        POINTS: [\n            [128, 160], [208, 160], [240, 192], [272, 160],\n            [352, 160], [352, 224], [304, 224], [304, 208],\n            [304, 320], [176, 320], [176, 208], [176, 224],\n            [128, 224], [128, 160]\n        ]\n    }\n};\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.BOTTOMS = {\n    TROUSERS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 448], [256, 448],\n            [256, 336], [224, 336], [224, 448], [176, 448]\n        ]\n    },\n    SHORTS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 384], [256, 384],\n            [256, 336], [224, 336], [224, 384], [176, 384]\n        ]\n    }\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._init = function ()\n{\n    // Start the drawing flag\n    this._needsDrawing = true;\n\n    /*** Initialize defaults ***/\n    let ctx = this._canvas.get2DContext();\n    ctx.strokeStyle = 'black';\n\n    // Body\n    this._bodyShape = MINI_YOU.Avatar.BODY_SHAPE_1;\n    this._bodyColor = 'lightgreen';\n\n    // Eyes\n    this._eyesShape = MINI_YOU.Avatar.EYES.BASIC;\n    this._eyesColor = 'royalblue';\n\n    // Shirt\n    this._topsShape = MINI_YOU.Avatar.TOPS.SHIRT;\n    this._topsColor = 'red';\n\n    // Trousers\n    this._bottomsShape = MINI_YOU.Avatar.BOTTOMS.TROUSERS;\n    this._bottomsColor = 'navy';\n\n    // Shoes\n    this._shoesColor = 'orange';\n\n    this._draw(); // Do initial drawing\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._draw = function ()\n{\n    if (this._needsDrawing)\n    {\n        // Draw  body\n        this._drawBody(this.getBodyShape(), this.getBodyColor());\n\n        // Draw eyes\n        this._drawEyes(this.getEyesShape(), this.getEyesColor());\n\n        // Draw tops\n        this._drawTops(this.getTopsShape(), this.getTopsColor());\n\n        // Draw bottoms\n        this._drawBottoms(this.getBottomsShape(), this.getBottomsColor());\n\n        // Draw shoes\n        this._drawShoes(this.getShoesColor());\n\n        this._needsDrawing = false;\n    }\n};\n\nMINI_YOU.Avatar.prototype.processData = function (data)\n{\n    // Body\n    if (typeof data.body !== 'undefined')\n    {\n        // Body shape\n        if (typeof data.body.shape !== 'undefined')\n        {\n            let bodyShape = data.body.shape;\n            switch (bodyShape)\n            {\n                case 'shape1':\n                default:\n                    this.setBodyShape(MINI_YOU.Avatar.BODY_SHAPE_1);\n            }\n        }\n        // Body color\n        if (typeof data.body.color !== 'undefined')\n        {\n            this.setBodyColor(data.body.color);\n        }\n    }\n\n    // Eyes\n    if (typeof data.eyes !== 'undefined')\n    {\n        // Eyes shape\n        if (typeof data.eyes.shape !== 'undefined')\n        {\n            let eyesShape = data.eyes.shape;\n            switch (eyesShape)\n            {\n                case 'basic':\n                default:\n                    this.setEyesShape(MINI_YOU.Avatar.EYES.BASIC);\n            }\n        }\n        // Eyes color\n        if (typeof data.eyes.color !== 'undefined')\n        {\n            this.setEyesColor(data.eyes.color);\n        }\n    }\n\n    // Tops\n    if (typeof data.tops !== 'undefined')\n    {\n        // Tops shape\n        if (typeof data.tops.shape !== 'undefined')\n        {\n            let topsShape = data.tops.shape;\n            switch (topsShape)\n            {\n                case 'tshirt':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.T_SHIRT);\n                    break;\n                case 'vneck':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.VNECK);\n                    break;\n                case 'shirt':\n                default:\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.SHIRT);\n            }\n        }\n        // Tops color\n        if (typeof data.tops.color !== 'undefined')\n        {\n            this.setTopsColor(data.tops.color);\n        }\n    }\n\n    // Bottoms\n    if (typeof data.bottoms !== 'undefined')\n    {\n        // Bottoms shape\n        if (typeof data.bottoms.shape !== 'undefined')\n        {\n            let bottomsShape = data.bottoms.shape;\n            switch (bottomsShape)\n            {\n                case 'shorts':\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.SHORTS);\n                    break;\n                case 'trousers':\n                default:\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.TROUSERS);\n            }\n        }\n        // Bottoms color\n        if (typeof data.bottoms.color !== 'undefined')\n        {\n            this.setBottomsColor(data.bottoms.color);\n        }\n    }\n\n    // Shoes\n    if (typeof data.shoes !== 'undefined')\n    {\n        // Shoes color\n        if (typeof data.shoes.color !== 'undefined')\n        {\n            this.setShoesColor(data.shoes.color);\n        }\n    }\n\n    // Set the drawing\n    this._draw();\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getBodyShape = function ()\n{\n    return this._bodyShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setBodyShape = function (shape)\n{\n    this._bodyShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBodyColor = function ()\n{\n    return this._bodyColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBodyColor = function (color)\n{\n    this._bodyColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} bodyShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBody = function (bodyShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bodyShape.POINTS[0][0], bodyShape.POINTS[0][1], bodyShape.POINTS, true, true);\n};\n\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getEyesShape = function ()\n{\n    return this._eyesShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setEyesShape = function (shape)\n{\n    this._eyesShape = shape;\n    this._needsDrawing = true;\n};\n\nMINI_YOU.Avatar.prototype.getEyesColor = function ()\n{\n    return this._eyesColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setEyesColor = function (color)\n{\n    this._eyesColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} eyesShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawEyes = function (eyesShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n\n    let leftEyeX = eyesShape.LEFT.X;\n    let leftEyeY = eyesShape.LEFT.Y;\n\n    let rightEyeX = eyesShape.RIGHT.X;\n    let rightEyeY = eyesShape.RIGHT.Y;\n\n    let radiusEnd = Math.PI * 2;\n\n    // Sclera (outside white part of the eye)\n    ctx.beginPath();\n    ctx.arc(leftEyeX, leftEyeY, 10, 0, radiusEnd);\n    ctx.moveTo(226, 88);\n    ctx.arc(rightEyeX, rightEyeY, 10, 0, radiusEnd);\n    ctx.fillStyle = 'white';\n    ctx.fill();\n    ctx.stroke();\n\n    // Iris\n    ctx.beginPath();\n    ctx.arc(leftEyeX, 89, 6, 0, radiusEnd);\n    ctx.moveTo(222, 88);\n    ctx.arc(rightEyeX, 87, 6, 0, radiusEnd);\n    ctx.fillStyle = color;\n    ctx.fill();\n    ctx.stroke();\n\n    // Pupil\n    ctx.beginPath();\n    ctx.arc(leftEyeX, 89, 2, 0, radiusEnd);\n    ctx.arc(rightEyeX, 87, 2, 0, radiusEnd);\n    ctx.fillStyle = 'black';\n    ctx.fill();\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getTopsShape = function ()\n{\n    return this._topsShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setTopsShape = function (shape)\n{\n    this._topsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getTopsColor = function ()\n{\n    return this._topsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setTopsColor = function (color)\n{\n    this._topsColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} topsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawTops = function (topsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(topsShape.POINTS[0][0], topsShape.POINTS[0][1], topsShape.POINTS, true, true);\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsShape = function ()\n{\n    return this._bottomsShape;\n};\n\n/**\n * @param {string} shape\n */\nMINI_YOU.Avatar.prototype.setBottomsShape = function (shape)\n{\n    this._bottomsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsColor = function ()\n{\n    return this._bottomsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBottomsColor = function (color)\n{\n    this._bottomsColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} bottomsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBottoms = function (bottomsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bottomsShape.POINTS[0][0], bottomsShape.POINTS[0][1], bottomsShape.POINTS, true, true);\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getShoesColor = function ()\n{\n    return this._shoesColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setShoesColor = function (color)\n{\n    this._shoesColor = color;\n};\n\n/**\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawShoes = function(color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n\n    let leftShoe = [\n        [256, 448], [304, 448], [304, 464], [256, 464]\n    ];\n    this._canvas.drawPolygon(leftShoe[0][0], leftShoe[0][1], leftShoe, true, true);\n\n    let rightShoe = [\n        [176, 448], [224, 448], [224, 464], [176, 464]\n    ];\n    this._canvas.drawPolygon(rightShoe[0][0], rightShoe[0][1], rightShoe, true, true);\n};","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function (canvas)\n{\n    this._canvas = canvas[0];\n    this._ctx = this._canvas.getContext('2d');\n\n    $(canvas).after('<div class=\"debugger\"></div>');\n    $(canvas).on('mousemove', function(e)\n    {\n        $('div.debugger').text('x: ' + e.offsetX + ' | y: ' + e.offsetY);\n    });\n\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n\n    this._init();\n\n    this._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\nMINI_YOU.Canvas.prototype._init = function ()\n{\n    this._ctx.fillStyle = 'white';\n    this._ctx.fillRect(0, 0, this._width, this._height);\n\n    // Draw a grid\n    this._ctx.strokeStyle = '#EAEAEA';\n    let pixel = 16;\n\n    let xValues = '';\n    for (let i = 0; i < this._width; i += pixel)\n    {\n        this.drawLine(i, 0, i, this._height);\n        xValues += i + ', ';\n    }\n    console.log(xValues);\n    for (let j = 0; j < this._height; j += pixel)\n    {\n        this.drawLine(0, j, this._width, j);\n    }\n};\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function ()\n{\n    return this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function (message, data)\n{\n    if (message === 'jsonChanged')\n    {\n        this._avatar.processData(data);\n    }\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function ()\n{\n    return this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function ()\n{\n    return this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawLine = function (startX, startY, endX, endY)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n    this._ctx.lineTo(endX, endY);\n    this._ctx.closePath();\n    this._ctx.stroke();\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function (startX, startY, points, fill, stroke)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n\n    for (let i = 0; i < points.length; i++)\n    {\n        let curX = points[i][0];\n        let curY = points[i][1];\n\n        this._ctx.lineTo(curX, curY);\n    }\n    this._ctx.closePath();\n\n    if (fill === true)\n    {\n        this._ctx.fill();\n    }\n\n    if (stroke === true)\n    {\n        this._ctx.stroke();\n    }\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._compiler = new MINI_YOU.Compiler();\n\n    this._listeners = [];\n\n    let self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                let start = $(this).get(0).selectionStart;\n                let end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (let i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    let text = this._element.val();\n    try\n    {\n        let result = this._compiler.compileCode(text);\n\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', result);\n    }\n    catch (e)\n    {\n        console.error(e);\n        this._element.css({\n            'background': 'darkred',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}