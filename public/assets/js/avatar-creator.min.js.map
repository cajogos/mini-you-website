{"version":3,"sources":["MiniYou.js","Compiler.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Compiler","prototype","constructor","compileCode","code","JSON","parse","Avatar","canvas","this","_canvas","BODY_SHAPE_1","POINTS","TOPS","SHIRT","T_SHIRT","BOTTOMS","TROUSERS","ctx","strokeStyle","SHORTS","_topsShape","_init","_needsDrawing","get2DContext","_bodyShape","_bodyColor","_drawBottoms","getBottomsShape","_topsColor","_bottomsShape","_bottomsColor","_draw","_drawBody","getBodyShape","getBodyColor","_drawTops","getTopsShape","getTopsColor","getBottomsColor","shape","setTopsShape","data","body","setBodyShape","bottoms","color","setBodyColor","tops","setBottomsShape","setBottomsColor","VNECK","setTopsColor","drawPolygon","bottomsShape","fillStyle","bodyShape","topsShape","getContext","$","after","e","text","offsetX","offsetY","_width","width","_height","height","_avatar","_ctx","fillRect","pixel","xValues","drawLine","i","console","log","j","message","handleEditorAlert","processData","getWidth","lineTo","getHeight","stroke","startX","startY","points","moveTo","curX","curY","fill","beginPath","length","closePath","_compiler","_listeners","self","on","parseText","_element","keyCode","preventDefault","end","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","result","css","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["let MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","MINI_YOU.Compiler = function ()\n{\n};\nMINI_YOU.Compiler.prototype.constructor = MINI_YOU.Compiler;\n\n/**\n * @param {string} code\n */\nMINI_YOU.Compiler.prototype.compileCode = function (code)\n{\n    let json = JSON.parse(code);\n    return json;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function (canvas)\n{\n    this._canvas = canvas;\n    this._init();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.BODY_SHAPE_1 = {\n    POINTS: [\n        [224, 144], [192, 144], [192, 64], [288, 64], [288, 144], [256, 144],\n        [256, 160], [352, 160],\n        // Left Arm\n        [352, 320], [304, 320], [304, 208], [304, 320],\n        // Left Leg\n        [304, 464], [256, 464], [256, 336],\n        // Torso\n        [224, 336],\n        // Right Leg\n        [224, 464], [176, 464], [176, 336],\n        // Right Arm\n        [176, 208], [176, 320], [128, 320], [128, 160], [224, 160]\n    ]\n};\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.TOPS = {\n    SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 288], [304, 288],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 288], [128, 288], [128, 160]\n        ]\n    },\n    T_SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 224], [304, 224],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 224], [128, 224], [128, 160]\n        ]\n    },\n    VNECK: {\n        POINTS: [\n            [128, 160], [208, 160], [240, 192], [272, 160],\n            [352, 160], [352, 224], [304, 224], [304, 208],\n            [304, 320], [176, 320], [176, 208], [176, 224],\n            [128, 224], [128, 160]\n        ]\n    }\n};\n\nMINI_YOU.Avatar.BOTTOMS = {\n    TROUSERS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 448], [256, 448],\n            [256, 336], [224, 336], [224, 448], [176, 448]\n        ]\n    },\n    SHORTS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 384], [256, 384],\n            [256, 336], [224, 336], [224, 384], [176, 384]\n        ]\n    }\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._init = function ()\n{\n    // Start the drawing flag\n    this._needsDrawing = true;\n\n    /*** Initialize defaults ***/\n    let ctx = this._canvas.get2DContext();\n    ctx.strokeStyle = 'black';\n\n    // Body\n    this._bodyShape = MINI_YOU.Avatar.BODY_SHAPE_1;\n    this._bodyColor = 'lightgreen';\n\n    // Shirt\n    this._topsShape = MINI_YOU.Avatar.TOPS.SHIRT;\n    this._topsColor = 'red';\n\n    // Trousers\n    this._bottomsShape = MINI_YOU.Avatar.BOTTOMS.TROUSERS;\n    this._bottomsColor = 'navy';\n\n    this._draw(); // Do initial drawing\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._draw = function ()\n{\n    if (this._needsDrawing)\n    {\n        // Draw  body\n        this._drawBody(this.getBodyShape(), this.getBodyColor());\n\n        // Draw tops\n        this._drawTops(this.getTopsShape(), this.getTopsColor());\n\n        // Draw bottoms\n        this._drawBottoms(this.getBottomsShape(), this.getBottomsColor());\n\n\n        this._needsDrawing = false;\n    }\n};\n\nMINI_YOU.Avatar.prototype.processData = function (data)\n{\n    // Body\n    if (typeof data.body !== 'undefined')\n    {\n        // Body shape\n        if (typeof data.body.shape !== 'undefined')\n        {\n            let bodyShape = data.body.shape;\n            switch (bodyShape)\n            {\n                case 'shape1':\n                default:\n                    this.setBodyShape(MINI_YOU.Avatar.BODY_SHAPE_1);\n            }\n        }\n        // Body color\n        if (typeof data.body.color !== 'undefined')\n        {\n            this.setBodyColor(data.body.color);\n        }\n    }\n\n    // Tops\n    if (typeof data.tops !== 'undefined')\n    {\n        // Tops shape\n        if (typeof data.tops.shape !== 'undefined')\n        {\n            let topsShape = data.tops.shape;\n            switch (topsShape)\n            {\n                case 'tshirt':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.T_SHIRT);\n                    break;\n                case 'vneck':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.VNECK);\n                    break;\n                case 'shirt':\n                default:\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.SHIRT);\n            }\n        }\n        // Tops color\n        if (typeof data.tops.color !== 'undefined')\n        {\n            this.setTopsColor(data.tops.color);\n        }\n    }\n\n    // Bottoms\n    if (typeof data.bottoms !== 'undefined')\n    {\n        // Bottoms shape\n        if (typeof data.bottoms.shape !== 'undefined')\n        {\n            let bottomsShape = data.bottoms.shape;\n            switch (bottomsShape)\n            {\n                case 'shorts':\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.SHORTS);\n                    break;\n                case 'trousers':\n                default:\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.TROUSERS);\n            }\n        }\n        // Bottoms color\n        if (typeof data.bottoms.color !== 'undefined')\n        {\n            this.setBottomsColor(data.bottoms.color);\n        }\n    }\n\n\n    // Set the drawing!\n    this._draw();\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getBodyShape = function ()\n{\n    return this._bodyShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setBodyShape = function (shape)\n{\n    this._bodyShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBodyColor = function ()\n{\n    return this._bodyColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBodyColor = function (color)\n{\n    this._bodyColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getTopsShape = function ()\n{\n    return this._topsShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setTopsShape = function (shape)\n{\n    this._topsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getTopsColor = function ()\n{\n    return this._topsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setTopsColor = function (color)\n{\n    this._topsColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsShape = function ()\n{\n    return this._bottomsShape;\n};\n\n/**\n * @param {string} shape\n */\nMINI_YOU.Avatar.prototype.setBottomsShape = function (shape)\n{\n    this._bottomsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsColor = function ()\n{\n    return this._bottomsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBottomsColor = function (color)\n{\n    this._bottomsColor = color;\n    this._needsDrawing = true;\n};\n\n/*** Draw Functions ***/\n/**\n * @param {Object} bodyShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBody = function (bodyShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bodyShape.POINTS[0][0], bodyShape.POINTS[0][1], bodyShape.POINTS, true, true);\n};\n\n/**\n * @param {Object} topsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawTops = function (topsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(topsShape.POINTS[0][0], topsShape.POINTS[0][1], topsShape.POINTS, true, true);\n};\n\n/**\n * @param {Object} bottomsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBottoms = function (bottomsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bottomsShape.POINTS[0][0], bottomsShape.POINTS[0][1], bottomsShape.POINTS, true, true);\n};","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function (canvas)\n{\n    this._canvas = canvas[0];\n    this._ctx = this._canvas.getContext('2d');\n\n    $(canvas).after('<div class=\"debugger\"></div>');\n    $(canvas).on('mousemove', function(e)\n    {\n        $('div.debugger').text('x: ' + e.offsetX + ' | y: ' + e.offsetY);\n    });\n\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n\n    this._init();\n\n    this._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\nMINI_YOU.Canvas.prototype._init = function ()\n{\n    this._ctx.fillStyle = 'white';\n    this._ctx.fillRect(0, 0, this._width, this._height);\n\n    // Draw a grid\n    this._ctx.strokeStyle = '#EAEAEA';\n    let pixel = 16;\n\n    let xValues = '';\n    for (let i = 0; i < this._width; i += pixel)\n    {\n        this.drawLine(i, 0, i, this._height);\n        xValues += i + ', ';\n    }\n    console.log(xValues);\n    for (let j = 0; j < this._height; j += pixel)\n    {\n        this.drawLine(0, j, this._width, j);\n    }\n};\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function ()\n{\n    return this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function (message, data)\n{\n    if (message === 'jsonChanged')\n    {\n        this._avatar.processData(data);\n    }\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function ()\n{\n    return this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function ()\n{\n    return this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawLine = function (startX, startY, endX, endY)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n    this._ctx.lineTo(endX, endY);\n    this._ctx.closePath();\n    this._ctx.stroke();\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function (startX, startY, points, fill, stroke)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n\n    for (let i = 0; i < points.length; i++)\n    {\n        let curX = points[i][0];\n        let curY = points[i][1];\n\n        this._ctx.lineTo(curX, curY);\n    }\n    this._ctx.closePath();\n\n    if (fill === true)\n    {\n        this._ctx.fill();\n    }\n\n    if (stroke === true)\n    {\n        this._ctx.stroke();\n    }\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._compiler = new MINI_YOU.Compiler();\n\n    this._listeners = [];\n\n    let self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                let start = $(this).get(0).selectionStart;\n                let end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (let i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    let text = this._element.val();\n    try\n    {\n        let result = this._compiler.compileCode(text);\n\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', result);\n    }\n    catch (e)\n    {\n        console.error(e);\n        this._element.css({\n            'background': 'darkred',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}