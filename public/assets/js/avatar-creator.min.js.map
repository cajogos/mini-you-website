{"version":3,"sources":["MiniYou.js","Compiler.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Compiler","prototype","constructor","compileCode","code","json","JSON","parse","console","log","Avatar","canvas","this","_initDraw","POINTS","HEAD","BODY","RIGHT_ARM","RIGHT_LEG","LEFT_LEG","ctx","_createHead","LEFT_ARM","fillStyle","_canvas","leftArmPoints","rightLegPoints","get2DContext","strokeStyle","bodyPoints","drawPolygon","rightArmPoints","headPoints","leftLegPoints","processData","data","head","color","getContext","_width","width","_init","_avatar","_ctx","fillRect","_height","i","drawLine","j","handleEditorAlert","message","getWidth","moveTo","startX","closePath","startY","endX","endY","beginPath","lineTo","curX","points","fill","stroke","length","curY","_compiler","_listeners","self","on","e","parseText","_element","keyCode","preventDefault","end","$","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","text","result","css","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["let MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","MINI_YOU.Compiler = function ()\n{\n};\nMINI_YOU.Compiler.prototype.constructor = MINI_YOU.Compiler;\n\n/**\n * @param {string} code\n */\nMINI_YOU.Compiler.prototype.compileCode = function (code)\n{\n    let json = JSON.parse(code);\n\n\n\n    console.log(json);\n\n    return json;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function(canvas)\n{\n    this._canvas = canvas;\n\n    this._initDraw();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\nMINI_YOU.Avatar.POINTS = {\n    HEAD: [\n        [192, 64],\n        [288, 64],\n        [288, 160],\n        [192, 160]\n    ],\n    BODY: [\n        [160, 160],\n        [320, 160],\n        [320, 320],\n        [160, 320]\n    ],\n    // Arms\n    RIGHT_ARM: [\n        [96, 160],\n        [160, 160],\n        [160, 320],\n        [96, 320]\n    ],\n    LEFT_ARM: [\n        [320, 160],\n        [384, 160],\n        [384, 320],\n        [320, 320]\n    ],\n    // Legs\n    RIGHT_LEG: [\n        [160, 320],\n        [224, 320],\n        [224, 480],\n        [160, 480]\n    ],\n    LEFT_LEG: [\n        [256, 320],\n        [320, 320],\n        [320, 480],\n        [256, 480]\n    ]\n};\n\nMINI_YOU.Avatar.prototype._initDraw = function()\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.strokeStyle = 'black';\n\n    // Head\n    this._createHead('red');\n\n    // Body\n    let bodyPoints = MINI_YOU.Avatar.POINTS.BODY;\n    ctx.fillStyle = 'blue';\n    this._canvas.drawPolygon(bodyPoints[0][0], bodyPoints[0][1], bodyPoints, true, true);\n\n    // Right Arm\n    let rightArmPoints = MINI_YOU.Avatar.POINTS.RIGHT_ARM;\n    ctx.fillStyle = 'violet';\n    this._canvas.drawPolygon(rightArmPoints[0][0], rightArmPoints[0][1], rightArmPoints, true, true);\n\n    // Left Arm\n    let leftArmPoints = MINI_YOU.Avatar.POINTS.LEFT_ARM;\n    ctx.fillStyle = 'orange';\n    this._canvas.drawPolygon(leftArmPoints[0][0], leftArmPoints[0][1], leftArmPoints, true, true);\n\n    // Right Leg\n    let rightLegPoints = MINI_YOU.Avatar.POINTS.RIGHT_LEG;\n    ctx.fillStyle = 'lime';\n    this._canvas.drawPolygon(rightLegPoints[0][0], rightLegPoints[0][1], rightLegPoints, true, true);\n\n    // Left Leg\n    let leftLegPoints = MINI_YOU.Avatar.POINTS.LEFT_LEG;\n    ctx.fillStyle = 'yellow';\n    this._canvas.drawPolygon(leftLegPoints[0][0], leftLegPoints[0][1], leftLegPoints, true, true);\n};\n\nMINI_YOU.Avatar.prototype.processData = function(data)\n{\n    console.log('data', data);\n    // Head\n    if (data.head)\n    {\n        this._createHead(data.head.color);\n    }\n};\n\nMINI_YOU.Avatar.prototype._createHead = function(color)\n{\n    let ctx = this._canvas.get2DContext();\n\n    let headPoints = MINI_YOU.Avatar.POINTS.HEAD;\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(headPoints[0][0], headPoints[0][1], headPoints, true, true);\n};","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function (canvas)\n{\n    this._canvas = canvas[0];\n    this._ctx = this._canvas.getContext('2d');\n\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n\n    this._init();\n\n    this._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\nMINI_YOU.Canvas.prototype._init = function ()\n{\n    this._ctx.fillStyle = 'white';\n    this._ctx.fillRect(0, 0, this._width, this._height);\n\n    // Draw a grid\n    this._ctx.strokeStyle = '#EAEAEA';\n    let pixel = 32;\n    for (let i = 0; i < this._width; i += pixel)\n    {\n        this.drawLine(i, 0, i, this._height);\n    }\n    for (let j = 0; j < this._height; j += pixel)\n    {\n        this.drawLine(0, j, this._width, j);\n    }\n};\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function ()\n{\n    return this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function (message, data)\n{\n    if (message === 'jsonChanged')\n    {\n        this._avatar.processData(data);\n    }\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function ()\n{\n    return this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function ()\n{\n    return this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawLine = function (startX, startY, endX, endY)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n    this._ctx.lineTo(endX, endY);\n    this._ctx.closePath();\n    this._ctx.stroke();\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function (startX, startY, points, fill, stroke)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n\n    for (let i = 0; i < points.length; i++)\n    {\n        let curX = points[i][0];\n        let curY = points[i][1];\n\n        this._ctx.lineTo(curX, curY);\n    }\n    this._ctx.closePath();\n\n    if (fill === true)\n    {\n        this._ctx.fill();\n    }\n\n    if (stroke === true)\n    {\n        this._ctx.stroke();\n    }\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._compiler = new MINI_YOU.Compiler();\n\n    this._listeners = [];\n\n    let self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                let start = $(this).get(0).selectionStart;\n                let end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (let i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    let text = this._element.val();\n    try\n    {\n        let result = this._compiler.compileCode(text);\n\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', result);\n    }\n    catch (e)\n    {\n        console.error(e);\n        this._element.css({\n            'background': 'darkred',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}