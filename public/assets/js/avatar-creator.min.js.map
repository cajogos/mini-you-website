{"version":3,"sources":["MiniYou.js","Compiler.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Compiler","prototype","constructor","compileCode","code","JSON","parse","Avatar","canvas","this","_canvas","BODY_SHAPE_1","POINTS","LEFT","EYES","X","Y","RIGHT","TOPS","SHIRT","T_SHIRT","BOTTOMS","TROUSERS","ctx","strokeStyle","SHORTS","_eyesShape","_bottomsShape","_draw","get2DContext","_bodyShape","_needsDrawing","_bodyColor","BASIC","_eyesColor","_topsShape","getTopsShape","_topsColor","_bottomsColor","body","_drawBody","setBodyShape","_drawEyes","getEyesShape","getEyesColor","_drawTops","getTopsColor","_drawBottoms","getBottomsShape","getBottomsColor","shape","processData","data","setEyesColor","tops","setTopsShape","setBodyColor","color","eyes","setTopsColor","bottoms","bottomsShape","setBottomsShape","VNECK","getBodyColor","setBottomsColor","getBodyShape","radiusEnd","PI","bodyShape","beginPath","arc","leftEyeX","leftEyeY","setEyesShape","fill","eyesShape","rightEyeX","rightEyeY","Math","moveTo","fillStyle","topsShape","drawPolygon","getContext","$","after","e","text","offsetX","offsetY","_width","width","_height","height","_init","_avatar","_ctx","fillRect","pixel","xValues","drawLine","i","console","log","j","message","handleEditorAlert","getWidth","lineTo","getHeight","stroke","startX","startY","points","curX","curY","length","closePath","_compiler","_listeners","self","on","parseText","_element","keyCode","preventDefault","end","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","result","css","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["let MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","MINI_YOU.Compiler = function ()\n{\n};\nMINI_YOU.Compiler.prototype.constructor = MINI_YOU.Compiler;\n\n/**\n * @param {string} code\n */\nMINI_YOU.Compiler.prototype.compileCode = function (code)\n{\n    let json = JSON.parse(code);\n    return json;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function (canvas)\n{\n    this._canvas = canvas;\n    this._init();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.BODY_SHAPE_1 = {\n    POINTS: [\n        [224, 144], [192, 144], [192, 64], [288, 64], [288, 144], [256, 144],\n        [256, 160], [352, 160],\n        // Left Arm\n        [352, 320], [304, 320], [304, 208], [304, 320],\n        // Left Leg\n        [304, 464], [256, 464], [256, 336],\n        // Torso\n        [224, 336],\n        // Right Leg\n        [224, 464], [176, 464], [176, 336],\n        // Right Arm\n        [176, 208], [176, 320], [128, 320], [128, 160], [224, 160]\n    ]\n};\n\nMINI_YOU.Avatar.EYES = {\n    BASIC: {\n        LEFT: {\n            X: 264,\n            Y: 88\n        },\n        RIGHT: {\n            X: 216,\n            Y: 88\n        }\n    }\n};\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.TOPS = {\n    SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 288], [304, 288],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 288], [128, 288], [128, 160]\n        ]\n    },\n    T_SHIRT: {\n        POINTS: [\n            [128, 160], [352, 160], [352, 224], [304, 224],\n            [304, 208], [304, 320], [176, 320], [176, 208],\n            [176, 224], [128, 224], [128, 160]\n        ]\n    },\n    VNECK: {\n        POINTS: [\n            [128, 160], [208, 160], [240, 192], [272, 160],\n            [352, 160], [352, 224], [304, 224], [304, 208],\n            [304, 320], [176, 320], [176, 208], [176, 224],\n            [128, 224], [128, 160]\n        ]\n    }\n};\n\n/**\n * @type {Object}\n */\nMINI_YOU.Avatar.BOTTOMS = {\n    TROUSERS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 448], [256, 448],\n            [256, 336], [224, 336], [224, 448], [176, 448]\n        ]\n    },\n    SHORTS: {\n        POINTS: [\n            [176, 320], [304, 320], [304, 384], [256, 384],\n            [256, 336], [224, 336], [224, 384], [176, 384]\n        ]\n    }\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._init = function ()\n{\n    // Start the drawing flag\n    this._needsDrawing = true;\n\n    /*** Initialize defaults ***/\n    let ctx = this._canvas.get2DContext();\n    ctx.strokeStyle = 'black';\n\n    // Body\n    this._bodyShape = MINI_YOU.Avatar.BODY_SHAPE_1;\n    this._bodyColor = 'lightgreen';\n\n    // Eyes\n    this._eyesShape = MINI_YOU.Avatar.EYES.BASIC;\n    this._eyesColor = 'royalblue';\n\n    // Shirt\n    this._topsShape = MINI_YOU.Avatar.TOPS.SHIRT;\n    this._topsColor = 'red';\n\n    // Trousers\n    this._bottomsShape = MINI_YOU.Avatar.BOTTOMS.TROUSERS;\n    this._bottomsColor = 'navy';\n\n    this._draw(); // Do initial drawing\n};\n\n/**\n * @private\n */\nMINI_YOU.Avatar.prototype._draw = function ()\n{\n    if (this._needsDrawing)\n    {\n        // Draw  body\n        this._drawBody(this.getBodyShape(), this.getBodyColor());\n\n        // Draw eyes\n        this._drawEyes(this.getEyesShape(), this.getEyesColor());\n\n        // Draw tops\n        this._drawTops(this.getTopsShape(), this.getTopsColor());\n\n        // Draw bottoms\n        this._drawBottoms(this.getBottomsShape(), this.getBottomsColor());\n\n\n        this._needsDrawing = false;\n    }\n};\n\nMINI_YOU.Avatar.prototype.processData = function (data)\n{\n    // Body\n    if (typeof data.body !== 'undefined')\n    {\n        // Body shape\n        if (typeof data.body.shape !== 'undefined')\n        {\n            let bodyShape = data.body.shape;\n            switch (bodyShape)\n            {\n                case 'shape1':\n                default:\n                    this.setBodyShape(MINI_YOU.Avatar.BODY_SHAPE_1);\n            }\n        }\n        // Body color\n        if (typeof data.body.color !== 'undefined')\n        {\n            this.setBodyColor(data.body.color);\n        }\n    }\n\n    // Eyes\n    if (typeof data.eyes !== 'undefined')\n    {\n        // Eyes shape\n        if (typeof data.eyes.shape !== 'undefined')\n        {\n            let eyesShape = data.eyes.shape;\n            switch (eyesShape)\n            {\n                case 'basic':\n                default:\n                    this.setEyesShape(MINI_YOU.Avatar.EYES.BASIC);\n            }\n        }\n        // Eyes color\n        if (typeof data.eyes.color !== 'undefined')\n        {\n            this.setEyesColor(data.eyes.color);\n        }\n    }\n\n    // Tops\n    if (typeof data.tops !== 'undefined')\n    {\n        // Tops shape\n        if (typeof data.tops.shape !== 'undefined')\n        {\n            let topsShape = data.tops.shape;\n            switch (topsShape)\n            {\n                case 'tshirt':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.T_SHIRT);\n                    break;\n                case 'vneck':\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.VNECK);\n                    break;\n                case 'shirt':\n                default:\n                    this.setTopsShape(MINI_YOU.Avatar.TOPS.SHIRT);\n            }\n        }\n        // Tops color\n        if (typeof data.tops.color !== 'undefined')\n        {\n            this.setTopsColor(data.tops.color);\n        }\n    }\n\n    // Bottoms\n    if (typeof data.bottoms !== 'undefined')\n    {\n        // Bottoms shape\n        if (typeof data.bottoms.shape !== 'undefined')\n        {\n            let bottomsShape = data.bottoms.shape;\n            switch (bottomsShape)\n            {\n                case 'shorts':\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.SHORTS);\n                    break;\n                case 'trousers':\n                default:\n                    this.setBottomsShape(MINI_YOU.Avatar.BOTTOMS.TROUSERS);\n            }\n        }\n        // Bottoms color\n        if (typeof data.bottoms.color !== 'undefined')\n        {\n            this.setBottomsColor(data.bottoms.color);\n        }\n    }\n\n\n    // Set the drawing!\n    this._draw();\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getBodyShape = function ()\n{\n    return this._bodyShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setBodyShape = function (shape)\n{\n    this._bodyShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBodyColor = function ()\n{\n    return this._bodyColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBodyColor = function (color)\n{\n    this._bodyColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} bodyShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBody = function (bodyShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bodyShape.POINTS[0][0], bodyShape.POINTS[0][1], bodyShape.POINTS, true, true);\n};\n\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getEyesShape = function ()\n{\n    return this._eyesShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setEyesShape = function (shape)\n{\n    this._eyesShape = shape;\n    this._needsDrawing = true;\n};\n\nMINI_YOU.Avatar.prototype.getEyesColor = function ()\n{\n    return this._eyesColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setEyesColor = function (color)\n{\n    this._eyesColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} eyesShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawEyes = function (eyesShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n\n    let leftEyeX = eyesShape.LEFT.X;\n    let leftEyeY = eyesShape.LEFT.Y;\n\n    let rightEyeX = eyesShape.RIGHT.X;\n    let rightEyeY = eyesShape.RIGHT.Y;\n\n    let radiusEnd = Math.PI * 2;\n\n    // Sclera (outside white part of the eye)\n    ctx.beginPath();\n    ctx.arc(leftEyeX, leftEyeY, 10, 0, radiusEnd);\n    ctx.moveTo(226, 88);\n    ctx.arc(rightEyeX, rightEyeY, 10, 0, radiusEnd);\n    ctx.fillStyle = 'white';\n    ctx.fill();\n    ctx.stroke();\n\n    // Iris\n    ctx.beginPath();\n    ctx.arc(leftEyeX, 89, 6, 0, radiusEnd);\n    ctx.moveTo(222, 88);\n    ctx.arc(rightEyeX, 87, 6, 0, radiusEnd);\n    ctx.fillStyle = color;\n    ctx.fill();\n    ctx.stroke();\n\n    // Pupil\n    ctx.beginPath();\n    ctx.arc(leftEyeX, 89, 2, 0, radiusEnd);\n    ctx.arc(rightEyeX, 87, 2, 0, radiusEnd);\n    ctx.fillStyle = 'black';\n    ctx.fill();\n};\n\n/**\n * @returns {Object}\n */\nMINI_YOU.Avatar.prototype.getTopsShape = function ()\n{\n    return this._topsShape;\n};\n\n/**\n * @param {Object} shape\n */\nMINI_YOU.Avatar.prototype.setTopsShape = function (shape)\n{\n    this._topsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getTopsColor = function ()\n{\n    return this._topsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setTopsColor = function (color)\n{\n    this._topsColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} topsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawTops = function (topsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(topsShape.POINTS[0][0], topsShape.POINTS[0][1], topsShape.POINTS, true, true);\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsShape = function ()\n{\n    return this._bottomsShape;\n};\n\n/**\n * @param {string} shape\n */\nMINI_YOU.Avatar.prototype.setBottomsShape = function (shape)\n{\n    this._bottomsShape = shape;\n    this._needsDrawing = true;\n};\n\n/**\n * @returns {string}\n */\nMINI_YOU.Avatar.prototype.getBottomsColor = function ()\n{\n    return this._bottomsColor;\n};\n\n/**\n * @param {string} color\n */\nMINI_YOU.Avatar.prototype.setBottomsColor = function (color)\n{\n    this._bottomsColor = color;\n    this._needsDrawing = true;\n};\n\n/**\n * @param {Object} bottomsShape\n * @param {string} color\n * @private\n */\nMINI_YOU.Avatar.prototype._drawBottoms = function (bottomsShape, color)\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.fillStyle = color;\n    this._canvas.drawPolygon(bottomsShape.POINTS[0][0], bottomsShape.POINTS[0][1], bottomsShape.POINTS, true, true);\n};","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function (canvas)\n{\n    this._canvas = canvas[0];\n    this._ctx = this._canvas.getContext('2d');\n\n    $(canvas).after('<div class=\"debugger\"></div>');\n    $(canvas).on('mousemove', function(e)\n    {\n        $('div.debugger').text('x: ' + e.offsetX + ' | y: ' + e.offsetY);\n    });\n\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n\n    this._init();\n\n    this._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\nMINI_YOU.Canvas.prototype._init = function ()\n{\n    this._ctx.fillStyle = 'white';\n    this._ctx.fillRect(0, 0, this._width, this._height);\n\n    // Draw a grid\n    this._ctx.strokeStyle = '#EAEAEA';\n    let pixel = 16;\n\n    let xValues = '';\n    for (let i = 0; i < this._width; i += pixel)\n    {\n        this.drawLine(i, 0, i, this._height);\n        xValues += i + ', ';\n    }\n    console.log(xValues);\n    for (let j = 0; j < this._height; j += pixel)\n    {\n        this.drawLine(0, j, this._width, j);\n    }\n};\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function ()\n{\n    return this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function (message, data)\n{\n    if (message === 'jsonChanged')\n    {\n        this._avatar.processData(data);\n    }\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function ()\n{\n    return this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function ()\n{\n    return this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawLine = function (startX, startY, endX, endY)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n    this._ctx.lineTo(endX, endY);\n    this._ctx.closePath();\n    this._ctx.stroke();\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function (startX, startY, points, fill, stroke)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n\n    for (let i = 0; i < points.length; i++)\n    {\n        let curX = points[i][0];\n        let curY = points[i][1];\n\n        this._ctx.lineTo(curX, curY);\n    }\n    this._ctx.closePath();\n\n    if (fill === true)\n    {\n        this._ctx.fill();\n    }\n\n    if (stroke === true)\n    {\n        this._ctx.stroke();\n    }\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._compiler = new MINI_YOU.Compiler();\n\n    this._listeners = [];\n\n    let self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                let start = $(this).get(0).selectionStart;\n                let end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (let i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    let text = this._element.val();\n    try\n    {\n        let result = this._compiler.compileCode(text);\n\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', result);\n    }\n    catch (e)\n    {\n        console.error(e);\n        this._element.css({\n            'background': 'darkred',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}